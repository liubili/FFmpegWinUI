<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="FFmpegWinUI.Page.MediaInfoPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FFmpegWinUI.Page"
    xmlns:viewmodels="using:FFmpegWinUI.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DataContext="{d:DesignInstance Type=viewmodels:MediaInfoPageViewModel}"
    mc:Ignorable="d"
    AllowDrop="True"
    DragOver="Page_DragOver"
    Drop="Page_Drop">

    <Grid Padding="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题栏 -->
        <StackPanel Grid.Row="0" Spacing="8" Margin="0,0,0,16">
            <TextBlock Text="媒体信息" Style="{StaticResource TitleTextBlockStyle}"/>
            <TextBlock Text="使用FFprobe查看媒体文件详细信息"
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
        </StackPanel>

        <!-- 信息显示区域 -->
        <Border Grid.Row="1"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8"
                Padding="16">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <TextBlock Text="{x:Bind ViewModel.MediaInfoText, Mode=OneWay}"
                           FontFamily="Consolas"
                           TextWrapping="Wrap"
                           IsTextSelectionEnabled="True"/>
            </ScrollViewer>
        </Border>

        <!-- 控制按钮栏 -->
        <CommandBar Grid.Row="2" DefaultLabelPosition="Right" Margin="0,8,0,0">
            <AppBarButton Icon="OpenFile" Label="选择文件"
                          Command="{x:Bind ViewModel.SelectFileCommand}"/>
            <AppBarSeparator/>
            <AppBarButton Icon="Copy" Label="复制信息"
                          Command="{x:Bind ViewModel.CopyInfoCommand}"/>
            <AppBarButton Icon="Save" Label="导出到文件"
                          Command="{x:Bind ViewModel.ExportToFileCommand}"/>
        </CommandBar>

        <!-- 加载指示器 -->
        <ProgressRing Grid.Row="1"
                      IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
                      Width="50" Height="50"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"/>
    </Grid>
</Page>
